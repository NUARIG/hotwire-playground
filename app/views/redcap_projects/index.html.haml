- content_for(:title) do
  REDCap Projects
.row
  #redcap_projects.col.s12
    .redcap_projects_header
      %h2
        REDCap Projects
      = form_tag redcap_projects_url(), method: 'get', :id => 'search_redcap_projects_form'  do
        .row
          .search.input-field.col.s8
            = label_tag :search, 'Search'
            = text_field_tag :search, (params[:search].nil? ? '' : params[:search]), type: 'search'
          .navigation.col.s4.right-align
            %button{ :type => 'submit', :id => 'search_notes_button', class: 'waves-effect waves-light btn' }
              Search
            = link_to 'Clear', redcap_projects_url()
    .redcap_projects_list.col.s12.right-align
      / = will_paginate @note_stable_identifiers, renderer: MaterializePagination::Rails
      = will_paginate @redcap_projects
      %table
        %thead
          %tr
            %th.redcap_project_name{ width: 200 }
              = sortable 'name'
            %th.redcap_project_api_token{ width: 100 }
              = sortable 'api_token'
            %th.edit{ width: 100 }
        %tbody
          - @redcap_projects.each do |redcap_project|
            = turbo_frame_tag dom_id(redcap_project) do
              = content_tag(:tr, redcap_project, id: dom_id(redcap_project), class: Redcap2omop::RedcapProject.to_s.demodulize.tableize) do
                %td.redcap_project_name
                  = redcap_project.name
                %td.redcap_project_api_token
                  = redcap_project.api_token
                %td.edit
                  = link_to 'Edit', edit_redcap_project_url(redcap_project)
      / = will_paginate @note_stable_identifiers, renderer: MaterializePagination::Rails
      = will_paginate @redcap_projects

      = will_paginate @redcap_projects
      .divTable{:style => "border: 1px solid #000;"}
        .divTableHeading
          .divTableRow
            .divTableHead Name
            .divTableHead API Token
            .divTableHead Export Table Name
            .divTableHead Route To Observation
            .divTableHead Insert Person
            .divTableHead Complete Instrument
            .divTableHead API Import
            .divTableHead Edit
        .divTableBody
          - @redcap_projects.each do |redcap_project|
            = render 'redcap_project', redcap_project: redcap_project
      = will_paginate @redcap_projects